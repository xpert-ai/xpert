<div fNodeInput [fInputId]="node().key" fInputConnectableSide="top" class="top absolute"></div>

<div class="relative flex items-center pt-3">
  @if (providerMeta(); as meta) {
    <xp-icon [icon]="meta.icon" size="18" class="w-6 h-6 shrink-0 flex items-center mr-2" 
      [matTooltip]="key()"
      matTooltipPosition="above" />
    <div [title]="meta.label | i18n" class="grow mr-1 font-semibold text-sm uppercase text-text-primary truncate flex items-center">
      <div>{{meta.label | i18n}}</div>
    </div>
  }
</div>

<div class="node-output-bottom flex items-center gap-2 h-3 absolute -bottom-[8px] left-1/2 -ml-2">
  <div fNodeOutput [fOutputId]="node().key + '/agent'" fOutputConnectableSide="bottom" [fOutputMultiple]="true"
    [fCanBeConnectedInputs]="canBeConnectedInputs()">
    <div class="inner-dot cursor-crosshair" [matTooltip]="'PAC.Xpert.ConnectAgents' | translate: {Default: 'Connect Agents'}" matTooltipPosition="above">
      <i class="ri-add-line w-2 h-2 flex justify-center items-center text-white"></i>
    </div>
  </div>
</div>
  
<div class="flex flex-wrap items-center gap-2 py-2 text-left">
  <div class="px-2 py-1 text-xs font-medium rounded-md bg-surface-strong text-text-primary">
    {{ 'PAC.Workflow.Middleware' | translate: {Default: 'Middleware'} }}
  </div>
  @if (middlewareEntity()?.middlewares?.length) {
    <div class="text-xs text-text-tertiary">
      {{ middlewareEntity().middlewares.length }} selected
    </div>
  } @else {
    <div class="text-xs text-text-tertiary">
      {{ 'PAC.Workflow.MiddlewarePending' | translate: {Default: 'Select middlewares to attach'} }}
    </div>
  }
</div>
