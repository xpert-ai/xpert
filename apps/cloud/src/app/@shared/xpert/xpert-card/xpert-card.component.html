<div class="flex pt-[14px] px-[14px] pb-3 h-[66px] items-center gap-3 grow-0 shrink-0">
  <div class="relative shrink-0">
    <emoji-avatar [avatar]="xpert().avatar" large class="rounded-xl overflow-hidden shadow-sm" />
    <span class="absolute bottom-[-3px] right-[-3px] w-4 h-4 p-0.5 bg-white rounded border-[0.5px] border-[rgba(0,0,0,0.02)] shadow-sm">
      @switch (xpert().type) {
        @case (eXpertTypeEnum.Copilot) {
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 text-primary-600" >
            <g id="cute-robot">
              <path id="Icon" fill-rule="evenodd" clip-rule="evenodd" d="M12 1C12.5523 1 13 1.44772 13 2V3H17C18.6569 3 20 4.34315 20 6V11C20 11.8885 19.6138 12.6868 19 13.2361V14.5858L20.7071 16.2929C21.0976 16.6834 21.0976 17.3166 20.7071 17.7071C20.3166 18.0976 19.6834 18.0976 19.2929 17.7071L18.681 17.0952C17.7905 19.9377 15.1361 22 12 22C8.8639 22 6.20948 19.9377 5.31897 17.0952L4.70711 17.7071C4.31658 18.0976 3.68342 18.0976 3.29289 17.7071C2.90237 17.3166 2.90237 16.6834 3.29289 16.2929L5 14.5858V13.2361C4.38625 12.6868 4 11.8885 4 11V6C4 4.34315 5.34315 3 7 3H11V2C11 1.44772 11.4477 1 12 1ZM7 5C6.44772 5 6 5.44772 6 6V11C6 11.5523 6.44772 12 7 12H17C17.5523 12 18 11.5523 18 11V6C18 5.44772 17.5523 5 17 5H7ZM9 7C9.55228 7 10 7.44772 10 8V9C10 9.55228 9.55228 10 9 10C8.44772 10 8 9.55228 8 9V8C8 7.44772 8.44772 7 9 7ZM15 7C15.5523 7 16 7.44772 16 8V9C16 9.55228 15.5523 10 15 10C14.4477 10 14 9.55228 14 9V8C14 7.44772 14.4477 7 15 7Z" fill="currentColor"></path>
            </g>
          </svg>
        }
        @case (eXpertTypeEnum.Agent) {
          <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 text-[#1570EF]">
            <g id="chat-bot">
              <path id="Vector" d="M4.20913 2.76912L4.09542 2.83543L3.98172 2.76912C3.90566 2.72476 3.86328 2.64979 3.86328 2.57101C3.86328 2.44347 3.96789 2.33887 4.09542 2.33887C4.22296 2.33887 4.32757 2.44347 4.32757 2.57101C4.32757 2.64979 4.28519 2.72476 4.20913 2.76912Z" fill="currentColor" stroke="currentColor" stroke-width="1.25"></path>
              <path id="Vector_2" d="M10.0174 6.00058C10.0123 5.98686 10.0097 5.97229 10.0046 5.95858C9.81684 5.48158 9.35398 5.14258 8.81056 5.14258H8.66784L7.52484 5.99972C7.33713 6.14029 7.11556 6.21444 6.88284 6.21444C6.29184 6.21444 5.81056 5.73358 5.81056 5.14258H2.81013C2.10127 5.14258 1.52441 5.71944 1.52441 6.42829V9.85686C1.52441 10.5657 2.10127 11.1426 2.81013 11.1426H8.81013C9.51899 11.1426 10.0958 10.5657 10.0958 9.85686V6.42829C10.0958 6.34386 10.0868 6.26158 10.071 6.18186C10.0586 6.11886 10.0384 6.05972 10.0174 6.00058ZM3.88156 8.57115C3.52713 8.57115 3.2387 8.28272 3.2387 7.92829C3.2387 7.57386 3.52713 7.28544 3.88156 7.28544C4.23599 7.28544 4.52441 7.57386 4.52441 7.92829C4.52441 8.28272 4.23599 8.57115 3.88156 8.57115ZM7.7387 8.57115C7.38427 8.57115 7.09584 8.28272 7.09584 7.92829C7.09584 7.57386 7.38427 7.28544 7.7387 7.28544C8.09313 7.28544 8.38156 7.57386 8.38156 7.92829C8.38156 8.28272 8.09313 8.57115 7.7387 8.57115Z" fill="currentColor"></path>
              <path id="Vector_3" d="M6.66699 5.14314V1.71456C6.66699 1.24099 7.05056 0.857422 7.52413 0.857422H10.9527C11.4263 0.857422 11.8098 1.24099 11.8098 1.71456V3.42885C11.8098 3.90242 11.4263 4.28599 10.9527 4.28599H8.38128L7.00985 5.31456C6.86842 5.42042 6.66699 5.31971 6.66699 5.14314Z" fill="currentColor"></path>
            </g>
          </svg>
        }
        @case (eXpertTypeEnum.Knowledge) {
          <i class="ri-contacts-book-fill w-3 h-3 text-xs flex justify-center items-center text-green-700"></i>
        }
      }
    </span>
  </div>
  <div class="grow w-0 py-[1px]">
    <div class="flex items-center text-base leading-5 font-semibold text-gray-800">
      <div class="truncate" [title]="xpert().title || xpert().name"
        [ngmHighlight]="highlight()"
        [content]="xpert().title || xpert().name">{{ xpert().title || xpert().name }}</div>
    </div>
    <div class="flex items-center text-xs leading-[18px] text-gray-500 font-medium">
      <div class="mr-1 px-0.5 text-xs leading-4 rounded-md border-[0.5px] border-solid border-slate-200">
        @if (xpert().version) {
          <span>v{{xpert().version}}</span>
        } @else {
          <span>draft</span>
        }
      </div>
      <div class="truncate">{{'PAC.Xpert.PublishAt' | translate: {Default: 'Publish at'} }}&nbsp;{{xpert().publishAt | relative}}</div>
      <span class="flex items-center mx-1">Â·</span>
      <div class="truncate">{{'PAC.KEY_WORDS.By' | translate: {Default: 'By'} }}&nbsp;{{xpert().createdBy | user}}</div>
    </div>
  </div>
</div>

<div
  class="grow mb-2 px-[14px] max-h-[72px] text-sm leading-normal text-gray-500 line-clamp-2"
  title="{{ xpert().description }}"
  [ngmHighlight]="highlight()"
  [content]="xpert().description"
>
  {{ xpert().description }}
</div>
<div class="flex items-center shrink-0 mt-1 pt-1 pl-[14px] pr-[6px] pb-[6px] h-[42px]">
  @if (xpert().tags?.length) {
  <div class="relative w-full flex items-center gap-1 py-[7px] rounded-md text-gray-500" >
    <svg
      width="14"
      height="14"
      viewBox="0 0 14 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="shrink-0 w-3 h-3"
    >
      <g id="Icon" clip-path="url(#clip0_17795_9693)">
        <path
          id="Icon_2"
          d="M4.66699 4.6665H4.67283M1.16699 3.03317L1.16699 5.6433C1.16699 5.92866 1.16699 6.07134 1.19923 6.20561C1.22781 6.32465 1.27495 6.43845 1.33891 6.54284C1.41106 6.66057 1.51195 6.76146 1.71373 6.96324L6.18709 11.4366C6.88012 12.1296 7.22664 12.4761 7.62621 12.606C7.97769 12.7202 8.35629 12.7202 8.70777 12.606C9.10735 12.4761 9.45386 12.1296 10.1469 11.4366L11.4371 10.1464C12.1301 9.45337 12.4766 9.10686 12.6065 8.70728C12.7207 8.35581 12.7207 7.9772 12.6065 7.62572C12.4766 7.22615 12.1301 6.87963 11.4371 6.1866L6.96372 1.71324C6.76195 1.51146 6.66106 1.41057 6.54332 1.33842C6.43894 1.27446 6.32514 1.22732 6.20609 1.19874C6.07183 1.1665 5.92915 1.1665 5.64379 1.1665L3.03366 1.1665C2.38026 1.1665 2.05357 1.1665 1.804 1.29366C1.58448 1.40552 1.406 1.58399 1.29415 1.80352C1.16699 2.05308 1.16699 2.37978 1.16699 3.03317ZM4.95866 4.6665C4.95866 4.82759 4.82808 4.95817 4.66699 4.95817C4.50591 4.95817 4.37533 4.82759 4.37533 4.6665C4.37533 4.50542 4.50591 4.37484 4.66699 4.37484C4.82808 4.37484 4.95866 4.50542 4.95866 4.6665Z"
          stroke="currentColor"
          stroke-width="1.25"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></path>
      </g>
      <defs>
        <clipPath id="clip0_17795_9693"><rect width="14" height="14" fill="white"></rect></clipPath>
      </defs>
    </svg>
    
    @for (tag of xpert().tags; track tag.id) {
      <tag [tag]="tag" xs />
    }
  </div>
  }
</div>

<div
  class="absolute bottom-1 left-0 right-0 items-center shrink-0 pt-1 pl-[14px] pr-[6px] pb-[6px] h-[42px]
    hidden group-hover:flex"
  (click)="$event.stopPropagation();"
>
  <div class="grow flex items-center gap-1 w-0">
    
  </div>
  <div class="shrink-0 mx-1 w-[1px] h-[14px] bg-gray-200"></div>
  <div class="shrink-0">
    <div class="relative" >
      <div>
        <button
          class="group bg-gray-100 !bg-transparent h-8 w-8 rounded-md border-none hover:!bg-black/5"
          type="button"
          [cdkMenuTriggerFor]="cardMenu"
          [cdkMenuTriggerData]="{xpert: xpert}"
        >
          <i class="ri-more-line"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="absolute right-4 bottom-4 flex items-center gap-2">
  @if (editable()) {
    <button type="button" class="btn rounded-xl justify-center w-8 h-8"
      [matTooltip]=" 'PAC.Xpert.EditXpert' | translate: {Default: 'Edit Xpert'} "
      matTooltipPosition="above"
      (click)="edit()">
      <i class="ri-edit-line"></i>
    </button>
  }
  <ng-content select="[action]"></ng-content>
</div>

<ng-template #cardMenu let-xpert="xpert">
  <div class="ngm-cdk-menu p-2" cdkMenu >
    <button class="ngm-cdk-menu-item p-2 danger" cdkMenuItem (click)="delete.emit(xpert.id)">
      <i class="ri-delete-bin-line mr-1"></i>{{ 'PAC.KEY_WORDS.Delete' | translate: { Default: 'Delete' } }}
    </button>
  </div>
</ng-template>